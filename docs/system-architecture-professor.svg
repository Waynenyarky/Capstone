<svg width="1400" height="1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="userGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4A90E2;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#357ABD;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="systemGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#50C878;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3FA860;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="dbGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FF6B6B;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#EE5A52;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="apiGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFA500;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FF8C00;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#34495E" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="700" y="40" font-family="Arial, sans-serif" font-size="32" font-weight="bold" text-anchor="middle" fill="#2C3E50">
    Capstone System Architecture
  </text>
  
  <!-- USERS AT THE TOP -->
  <rect x="400" y="100" width="600" height="150" rx="10" fill="url(#userGrad)" filter="url(#shadow)" opacity="0.9"/>
  <text x="700" y="135" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="white">
    USERS
  </text>
  
  <!-- Web App -->
  <rect x="450" y="160" width="150" height="70" rx="8" fill="white" filter="url(#shadow)"/>
  <text x="525" y="185" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2C3E50">
    Web App
  </text>
  <text x="525" y="205" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#7F8C8D">
    React/Vite
  </text>
  <text x="525" y="220" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#95A5A6">
    Port: 5173
  </text>
  
  <!-- Mobile App -->
  <rect x="625" y="160" width="150" height="70" rx="8" fill="white" filter="url(#shadow)"/>
  <text x="700" y="185" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2C3E50">
    Mobile App
  </text>
  <text x="700" y="205" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#7F8C8D">
    Flutter
  </text>
  <text x="700" y="220" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#95A5A6">
    Android/iOS
  </text>

  
  <!-- Arrow from Users to System -->
  <line x1="700" y1="250" x2="700" y2="350" stroke="#34495E" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="720" y="300" font-family="Arial, sans-serif" font-size="12" fill="#34495E">
    HTTP/HTTPS + JWT
  </text>
  
  <!-- SYSTEM AT THE CENTER -->
  <rect x="450" y="350" width="500" height="480" rx="10" fill="url(#systemGrad)" filter="url(#shadow)" opacity="0.9"/>
  <text x="700" y="380" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="white">
    SYSTEM
  </text>
  
  <!-- Auth Service -->
  <rect x="480" y="410" width="200" height="120" rx="8" fill="white" filter="url(#shadow)"/>
  <text x="580" y="435" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2C3E50">
    Auth Service
  </text>
  <text x="580" y="455" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7F8C8D">
    Port: 3001
  </text>
  <text x="490" y="480" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• User Auth</text>
  <text x="490" y="500" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• MFA/TOTP</text>
  <text x="490" y="520" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Google OAuth</text>
  
  <!-- Business Service -->
  <rect x="720" y="410" width="200" height="120" rx="8" fill="white" filter="url(#shadow)"/>
  <text x="820" y="435" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2C3E50">
    Business Service
  </text>
  <text x="820" y="455" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7F8C8D">
    Port: 3002
  </text>
  <text x="730" y="480" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Permit Processing</text>
  <text x="730" y="500" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Inspection Tracking</text>
  <text x="730" y="520" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Violations, Cessations, Appeals</text>
  
  <!-- Admin Service -->
  <rect x="480" y="560" width="200" height="120" rx="8" fill="white" filter="url(#shadow)"/>
  <text x="580" y="585" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2C3E50">
    Admin Service
  </text>
  <text x="580" y="605" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7F8C8D">
    Port: 3003
  </text>
  <text x="490" y="630" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Admin Ops</text>
  <text x="490" y="650" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Monitoring</text>
  <text x="490" y="670" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Approvals</text>
  
  <!-- Audit Service -->
  <rect x="720" y="560" width="200" height="120" rx="8" fill="white" filter="url(#shadow)"/>
  <text x="820" y="585" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2C3E50">
    Audit Service
  </text>
  <text x="820" y="605" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7F8C8D">
    Port: 3004
  </text>
  <text x="730" y="630" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Audit Logging</text>
  <text x="730" y="650" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Blockchain</text>
  <text x="730" y="670" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Verification</text>
  
  <!-- AI Service -->
  <rect x="600" y="710" width="200" height="120" rx="8" fill="white" filter="url(#shadow)"/>
  <text x="700" y="735" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2C3E50">
    AI Service
  </text>
  <text x="700" y="755" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7F8C8D">
    Port: 3005
  </text>
  <text x="610" y="780" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• ML Model</text>
  <text x="610" y="800" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Predictions</text>
  <text x="610" y="820" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Analysis</text>
  
  <!-- Service Communication Arrows (bidirectional) -->
  <line x1="680" y1="470" x2="720" y2="470" stroke="#34495E" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="720" y1="470" x2="680" y2="470" stroke="#34495E" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="680" y1="620" x2="720" y2="620" stroke="#34495E" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="720" y1="620" x2="680" y2="620" stroke="#34495E" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="580" y1="530" x2="580" y2="560" stroke="#34495E" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="580" y1="560" x2="580" y2="530" stroke="#34495E" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="820" y1="530" x2="820" y2="560" stroke="#34495E" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="820" y1="560" x2="820" y2="530" stroke="#34495E" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- Arrows from services to AI Service -->
  <line x1="580" y1="680" x2="600" y2="710" stroke="#34495E" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="820" y1="680" x2="800" y2="710" stroke="#34495E" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="700" y1="710" x2="580" y2="680" stroke="#34495E" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="700" y1="710" x2="820" y2="680" stroke="#34495E" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- DB TO THE LEFT -->
  <rect x="50" y="400" width="350" height="300" rx="10" fill="url(#dbGrad)" filter="url(#shadow)" opacity="0.9"/>
  <text x="225" y="430" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="white">
    DATABASE
  </text>
  
  <!-- MongoDB -->
  <rect x="80" y="460" width="290" height="80" rx="8" fill="white" filter="url(#shadow)"/>
  <text x="225" y="485" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#2C3E50">
    MongoDB
  </text>
  <text x="225" y="505" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#7F8C8D">
    Port: 27017
  </text>
  <text x="100" y="525" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• User Data</text>
  <text x="100" y="540" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Business Data</text>
  
  <!-- IPFS -->
  <rect x="80" y="560" width="290" height="80" rx="8" fill="white" filter="url(#shadow)"/>
  <text x="225" y="585" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#2C3E50">
    IPFS
  </text>
  <text x="225" y="605" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#7F8C8D">
    Ports: 4001, 5001, 8080
  </text>
  <text x="100" y="625" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Decentralized Storage</text>
  <text x="100" y="640" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Document CIDs</text>
  
  <!-- Ganache -->
  <rect x="80" y="660" width="290" height="80" rx="8" fill="white" filter="url(#shadow)"/>
  <text x="225" y="685" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#2C3E50">
    Ganache
  </text>
  <text x="225" y="705" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#7F8C8D">
    Port: 7545
  </text>
  <text x="100" y="725" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Dev Blockchain</text>
  <text x="100" y="740" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Smart Contracts</text>
  
  <!-- Bidirectional arrows between DB and System -->
  <line x1="400" y1="550" x2="450" y2="550" stroke="#34495E" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="450" y1="550" x2="400" y2="550" stroke="#34495E" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="400" y="540" font-family="Arial, sans-serif" font-size="11" fill="#34495E">Data Exchange</text>
  
  <!-- EXTERNAL SERVICES TO THE RIGHT -->
  <rect x="1000" y="400" width="350" height="300" rx="10" fill="url(#apiGrad)" filter="url(#shadow)" opacity="0.9"/>
  <text x="1175" y="430" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="white">
    EXTERNAL SERVICES
  </text>
  
  <!-- Email Providers -->
  <rect x="1030" y="460" width="290" height="70" rx="8" fill="white" filter="url(#shadow)"/>
  <text x="1175" y="485" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2C3E50">
    Email Providers
  </text>
  <text x="1050" y="505" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• SendGrid</text>
  
  <!-- Google OAuth -->
  <rect x="1030" y="550" width="290" height="70" rx="8" fill="white" filter="url(#shadow)"/>
  <text x="1175" y="575" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2C3E50">
    Google OAuth
  </text>
  <text x="1050" y="595" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Authentication</text>
  <text x="1050" y="610" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• User Profiles</text>
  

  <!-- One arrow from External Services to System (one-way) -->
  <line x1="1000" y1="550" x2="950" y2="550" stroke="#34495E" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="950" y="540" font-family="Arial, sans-serif" font-size="11" fill="#34495E">Service Calls</text>
  
  <!-- Bidirectional arrows between External Services and System (other parts exchange data) -->
  <line x1="950" y1="600" x2="1000" y2="600" stroke="#34495E" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="1000" y1="600" x2="950" y2="600" stroke="#34495E" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="950" y="590" font-family="Arial, sans-serif" font-size="10" fill="#34495E">Data Exchange</text>
  
  <line x1="950" y1="650" x2="1000" y2="650" stroke="#34495E" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="1000" y1="650" x2="950" y2="650" stroke="#34495E" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="950" y="640" font-family="Arial, sans-serif" font-size="10" fill="#34495E">Data Exchange</text>
  
</svg>